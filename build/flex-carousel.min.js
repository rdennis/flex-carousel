'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h['return']&&h['return']()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}(function(a,b){function c(a){return a&&String.prototype.trim.call(a)&&!isNaN(a)?+a:a}function d(a){return o.get(a)||new Set}function e(a,b){o.has(a)||o.set(a,new Set),d(a).add(b)}function f(a){return a.replace(n,function(a,b){return b.toUpperCase()})}function g(a,b){var c=f(b);return a&&(a.dataset[c]||a.getAttribute(b))||''}function h(a){var b=g(a,'flex-carousel-item')||'',d=b.split(';');return d.reduce(function(a,b){var d=b.split(':'),e=_slicedToArray(d,2),f=e[0],g=e[1];return f=f.trim(),g=c(g),a[f]=g,a},{})}function j(a){var b=a.getAttribute('id');return b||(b='flex-carousel-'+ ++p,a.setAttribute('id',b)),b}function i(a,b){var c=0;return'string'==typeof b?'+1'===b||b===m.FORWARD?c=a.currentIndex+1:'-1'===b||b===m.REVERSE?c=a.currentIndex-1:c=parseInt(b,10)||0:'number'==typeof b&&(c=b),c=0>c?a.itemCount-1:c,c=c>a.itemCount-1?0:c,c}function k(a,b){if(a&&0<a.length)for(var c,d=0,e=a.length;d<e;d++)c=a.item(d),c.setAttribute('aria-hidden',d===b)}function l(a,b){var c;a&&b&&b.size&&a.el&&!(c=a.el.getAttribute('aria-controls'))&&(c='',b.forEach(function(a){if(a&&a.el){var b=a.el.getAttribute('id');c+=' '+b}}),a.el.setAttribute('aria-controls',c.trim()))}var m={FORWARD:'forward',REVERSE:'reverse'},n=/-(\w)?/g,o=new Map,p=0,q={FlexCarousel:{initialIndex:0,autoPlay:!0,direction:m.FORWARD,speed:5e3},FlexCarouselIndicator:{activeClass:''}},r=function(){function b(a,c){var d=this;if(_classCallCheck(this,b),!a)throw'FlexCarousel needs an Element!';this.settings=Object.assign({},b.defaults,c),this.el=a,this.id=j(this.el),this.name=g(a,'flex-carousel').split(':')[0],this.currentIndex=this.settings.initialIndex,this.items=this.el.children,this.itemCount=this.items.length;var f=window.getComputedStyle(this.el.parentElement),h=window.getComputedStyle(this.el);'hidden'!==f.overflowX&&(this.el.parentElement.style.overflowX='hidden'),'static'===h.position&&(a.style.position='relative'),h.display.includes('flex')||(a.style.display='flex'),this.el.style.width=100*this.items.length+'%';for(var k,m=0,i=this.itemCount;m<i;m++)k=this.items.item(m),k.style.flex='1 0 auto';e(this.name,this),['slide','play','pause','toggle'].forEach(function(a){d.el.addEventListener('fc:'+a,function(b){return d[a](b.detail)})}),this.slide(this.currentIndex),this.settings.autoPlay&&this.play()}return _createClass(b,[{key:'slide',value:function slide(a){this.currentIndex=i(this,a);var b=100*this.currentIndex;this.el.style.left='-'+b+'%',k(this.items,this.currentIndex),this.el.dispatchEvent(new CustomEvent('fc:slid',{detail:this.currentIndex}))}},{key:'play',value:function play(){var b=this,c=this.items.item(this.currentIndex),d=Object.assign({},this.settings,h(c));this._timeout=a.setTimeout(function(){b.slide(b.settings.direction),b.play()},d.speed)}},{key:'pause',value:function pause(){a.clearTimeout(this._timeout),this._timeout=null}},{key:'toggle',value:function toggle(){this._timeout?this.pause():this.play()}}],[{key:'defaults',get:function get(){return q.FlexCarousel},set:function set(a){q.FlexCarousel=a}}]),b}(),s=function(){function a(b){var c=this;if(_classCallCheck(this,a),!b)throw'FlexCarouselControl needs an Element!';this.el=b;var e=g(b,'flex-carousel-control').split(':'),f=_slicedToArray(e,3);this.targetName=f[0],this.event=f[1],this.param=f[2],l(this,d(this.targetName)),this.el.addEventListener('click',function(){return c.onclick()})}return _createClass(a,[{key:'onclick',value:function onclick(){var a=this,b=d(this.targetName);b.forEach(function(b){b&&b.el&&b.el.dispatchEvent(new CustomEvent('fc:'+a.event,{detail:a.param}))})}}]),a}(),t=function(){function a(b,c){var f=this;if(_classCallCheck(this,a),!b)throw'FlexCarouselIndicator needs an Element!';this.el=b,this.settings=Object.assign({},a.defaults,c);var e=g(b,'flex-carousel-indicator').split(':'),h=_slicedToArray(e,3);this.targetName=h[0],this.index=h[1],this.activeClass=h[2],this.index=parseInt(this.index),this.activeClass=this.activeClass||this.settings.activeClass;var i=d(this.targetName);i.forEach(function(a){a&&a.el&&a.el.addEventListener('fc:slid',function(a){return f.onslid(a)})})}return _createClass(a,[{key:'onslid',value:function onslid(a){var b=parseInt(a.detail),c=b===this.index;c?this.el.setAttribute('data-flex-carousel-indicator-active',''):this.el.removeAttribute('data-flex-carousel-indicator-active'),this.activeClass&&this.el.classList.toggle(this.activeClass,c)}}],[{key:'defaults',get:function get(){return q.FlexCarouselIndicator},set:function set(a){q.FlexCarouselIndicator=a}}]),a}();a.FlexCarousel=r,a.FlexCarouselControl=s,a.FlexCarouselIndicator=t,b.addEventListener('fc:init',function(){b.querySelectorAll('[data-flex-carousel],[flex-carousel]').forEach(function(a){return new r(a)}),b.querySelectorAll('[data-flex-carousel-control],[flex-carousel-control]').forEach(function(a){return new s(a)}),b.querySelectorAll('[data-flex-carousel-indicator],[flex-carousel-indicator]').forEach(function(a){return new t(a)})}),document.dispatchEvent(new CustomEvent('fc:init'))})(window,document);
